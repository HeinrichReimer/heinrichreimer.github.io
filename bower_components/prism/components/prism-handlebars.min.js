(function(b){var a=/\{\{\{[\w\W]+?\}\}\}|\{\{[\w\W]+?\}\}/g;b.languages.handlebars=b.languages.extend("markup",{handlebars:{pattern:a,inside:{delimiter:{pattern:/^\{\{\{?|\}\}\}?$/i,alias:"punctuation"},string:/(["'])(\\?.)*?\1/,number:/\b-?(0x[\dA-Fa-f]+|\d*\.?\d+([Ee][+-]?\d+)?)\b/,"boolean":/\b(true|false)\b/,block:{pattern:/^(\s*~?\s*)[#\/]\S+?(?=\s*~?\s*$|\s)/i,lookbehind:true,alias:"keyword"},brackets:{pattern:/\[[^\]]+\]/,inside:{punctuation:/\[|\]/,variable:/[\w\W]+/}},punctuation:/[!"#%&'()*+,.\/;<=>@\[\\\]^`{|}~]/,variable:/[^!"#%&'()*+,.\/;<=>@\[\\\]^`{|}~\s]+/}}});b.languages.insertBefore("handlebars","tag",{"handlebars-comment":{pattern:/\{\{![\w\W]*?\}\}/,alias:["handlebars","comment"]}});b.hooks.add("before-highlight",function(c){if(c.language!=="handlebars"){return}c.tokenStack=[];c.backupCode=c.code;c.code=c.code.replace(a,function(d){c.tokenStack.push(d);return"___HANDLEBARS"+c.tokenStack.length+"___"})});b.hooks.add("before-insert",function(c){if(c.language==="handlebars"){c.code=c.backupCode;delete c.backupCode}});b.hooks.add("after-highlight",function(e){if(e.language!=="handlebars"){return}for(var d=0,c;c=e.tokenStack[d];d++){e.highlightedCode=e.highlightedCode.replace("___HANDLEBARS"+(d+1)+"___",b.highlight(c,e.grammar,"handlebars").replace(/\$/g,"$$$$"))}e.element.innerHTML=e.highlightedCode})}(Prism));