(function(){if(typeof self==="undefined"||!self.Prism||!self.document||!document.createRange){return}Prism.plugins.KeepMarkup=true;Prism.hooks.add("before-highlight",function(a){if(!a.element.children.length){return}var d=0;var c=[];var b=function(f,h){var j={};if(!h){j.clone=f.cloneNode(false);j.posOpen=d;c.push(j)}for(var g=0,e=f.childNodes.length;g<e;g++){var k=f.childNodes[g];if(k.nodeType===1){b(k)}else{if(k.nodeType===3){d+=k.data.length}}}if(!h){j.posClose=d}};b(a.element,true);if(c&&c.length){a.keepMarkup=c}});Prism.hooks.add("after-highlight",function(b){if(b.keepMarkup&&b.keepMarkup.length){var a=function(f,e){for(var g=0,c=f.childNodes.length;g<c;g++){var h=f.childNodes[g];if(h.nodeType===1){if(!a(h,e)){return false}}else{if(h.nodeType===3){if(!e.nodeStart&&e.pos+h.data.length>e.node.posOpen){e.nodeStart=h;e.nodeStartPos=e.node.posOpen-e.pos}if(e.nodeStart&&e.pos+h.data.length>=e.node.posClose){e.nodeEnd=h;e.nodeEndPos=e.node.posClose-e.pos}e.pos+=h.data.length}}if(e.nodeStart&&e.nodeEnd){var d=document.createRange();d.setStart(e.nodeStart,e.nodeStartPos);d.setEnd(e.nodeEnd,e.nodeEndPos);e.node.clone.appendChild(d.extractContents());d.insertNode(e.node.clone);d.detach();return false}}return true};b.keepMarkup.forEach(function(c){a(b.element,{node:c,pos:0})})}})}());